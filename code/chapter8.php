<!-- Content -->		

<div class="row">
  <div class="col-12">
    <h2 style="color: #39CCCC">Capítulo 8 - A Decodificação da Enigma</h2>
    <p class="text-justify">
      Sentindo-se ameaçada pelo governo comunista russo, que pregava a revolução mundial, a Polônia empregou um trio de matemáticos para encontrar falhas na Enigma.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">Espionagem Polonesa</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Em 1929, a Polônia se via na linha de frente da criptografia, devido aos seguintes fatos:
    </p>
    <ul>
      <li>Escritório de Cifras dos EUA se fecha;</li>
      <li>França reduz à 8 pessoas os criptoanalistas do exército;</li>
      <li>Sala 40 se funde à Unidade de Informações M11b do Exército Britânico, formando a Escola de Códigos e Cifras do Governo (GC&CS).</li>
    </ul>
    <p class="text-justify">
      O exército polonês conseguiu conter os soviéticos através de mensagens decifradas, pelo Escritório de Cifras criado por Jan Kowalewski, 
      então a Polônia foi ameaçada a leste.
    </p>
    <p class="text-justify">
      Com o Tratado de Versalhes, o país teve acesso ao Mar Báltico (corredor polonês), tornando Gdansk uma cidade livre, provocando ressentimento alemão, 
      que ocasionou na invasão ao país por Adolf Hitler em 1939.
    </p>
  </div>

  <div style="max-width: 450px" class="mx-auto d-block text-center mb-3">
    <img src="view/static/images/corredor_polones.jpg"  alt="Corredor Polonês" class="img-fluid img-thumbnail"><br>
    <small class="mx-auto d-block">Figura 1: Corredor Polonês</small>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">Leitura dos Códigos Alemães</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Para interceptar as mensagens alemãs, a Polônia e a França assinaram um tratado. Descobriram que a Alemanha mudou sua criptografia e, 
      então compraram uma máquina Enigma. Foi descoberto que os alemães utilizavam o método de superimposição, para descobrir o cumprimento 
      da chave e depois decompor a cifra polialfabética numa série de cifras monoalfabética que possam ser elucidadas por análise de frequências.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">Matemáticos</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      O Escritório de Cifras, agora chamado de BS-4, captou em Poznan, matemáticos para decifrar os códigos alemãs. 
      Houve três destaques: Marian Rejewski, Henryk Zygalski e Jerzy Rózycki, que trabalharam na interceptação das 
      mensagens da marinha alemã, notando que na maioria dos códigos, iniciavam com a letra Y e concluíram que eram perguntas. 
      Também notaram que uma mensagem de 06 grupos começada com YPOY foi respondida com uma mensagem de 04 grupos, ou seja:
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12 col-lg-5">
    <div class="form-group">
      <label class="form-label text-danger">Pergunta</label>
      <span class="form-control">Quando Frederico, o Grande, nasceu?</span>
    </div>
    <div class="form-group">
      <label class="form-label text-danger">Resposta</label>
      <span class="form-control">1712</span>
    </div>
  </div>
</div>

<div style="max-width: 700px" class="mx-auto d-block text-center mb-3">
  <img src="view/static/images/matematica_discos_rotativos.gif"  alt="A matemática por trás dos discos rotativos" class="img-fluid img-thumbnail"><br>
  <small>Figura 2: A matemática por trás dos discos rotativos</small>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">A sorte dos Franceses</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Sem avanços para decifrar a Enigma, o francês Gustave Bertrand, chefe da Seção D dos serviços de informações, recebeu a carta de Hans-Thilo Schmidt da 
      cidade de Praga, oferecendo a venda de importantes documentos alemães. Então enviou para o encontro na Bélgica, um agente codinome REX. 
      Constatou-se que os documentos eram genuínos, mesmo assim compraram o manual da máquina Enigma, que auxiliou os decifradores poloneses, 
      que não sabiam nada sobre o painel de conexão, que não existia na máquina comercial, e imediatamente construíram réplicas. Enquanto isso, 
      Schmidt forneceu a REX e Bertrand algumas chaves diárias.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">Identificação de um ponto fraco</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Rejewski foi cada vez mais fazendo descobertas sobre a Enigma:
    </p>
    <ul>
      <li>As mensagens começavam com um grupo típico de 06 letras;</li>
      <li>Para configurar a máquina, deve-se conectar o painel de acordo com a lista de chaves;</li>
      <li>Os rotores inseridos na ordem específica para aquele trimestre;</li>
      <li>Os anéis alfabéticos ajustados, para o ressalto da mola girar o rotor, deixando ao lado da letra dada na lista de chaves do dia;</li>
      <li>Os rotores eram girados até as letras da chave do dia aparecerem nas janelas, em seguida o operador criava um código de 03 letras específicas e o cifrava 02 vezes. O código resultante seria transmitido.</li>
      <li>O operador girava os rotores até as letras especificadas e começava a criptografar a mensagem propriamente dita.</li>
    </ul>
    <p class="text-justify">
      Já o destinatário, após configurar a máquina, ao receber as letras específicas (chave da mensagem), ajustava os rotores para mostrar as letras 
      e então começavam a decifrar o corpo da mensagem.
    </p>
  </div>

  <div class="col-12 mb-3 mx-auto d-block text-center" style="max-width: 450px">
    <div class="embed-responsive embed-responsive-16by9">
      <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/VnsTHAH5yAE?feature=oembed" allowfullscreen></iframe>
    </div>
    <small>Vídeo: Funcionamento da Máquina Enigma 1</small>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Então Rejewski supôs que havia relação entre a primeira e a quarta letra da mensagem, entre a segunda e quinta e a terceira e a 
      sexta, em que a codificação da mesma letra e a relação entre elas refletia a posição inicial dos rotores. 
    </p>
    <p class="text-justify">Para montar um conjunto completo das relações entre as letras, ele montou uma tabela a partir de mensagens interceptadas no mesmo dia, onde:</p>
    <ul>
      <li>a primeira letra (A) podia estar ligada à quarta letra (P);</li>
      <li>a primeira letra (P) podia estar ligada à quarta letra (F);</li>
      <li>então a primeira letra (F) estava ligada à quarta letra (A), levando o encadeamento de volta ao início.</li>
    </ul>
    <p class="text-justify">
      Esses encadeamentos em todas as letras que surgiam nas 1ª e 4ª, 2ª e 5ª e na 3ª e 6ª posições. Elas mudavam todo dia, as vezes os encadeamentos 
      eram longos com vários elos, as vezes curtos com poucos elos. O número de elos e de encadeamentos dependiam da ordem dos rotores e da chave do dia. 
      Já os ajustes do painel de conexão, só trocava uma letra por outra e não mudava o tamanho do encadeamento. Assim, Rejewski reduziu o número de 
      possibilidades por um fator de 100.391.791.500, de 10.000.000.000.000.000 para 105.456, que era o número inicial de configurações dos rotores. 
    </p>
  </div>

  <div style="max-width: 500px" class="mx-auto d-block text-center mb-3">
    <img src="view/static/images/enigma_codebreakers.jpg"  alt="Monumento aos decifradores da Enigma" class="img-fluid img-thumbnail"><br>
    <small>Figura 3: Monumento aos decifradores da Enigma (Poznan)</small>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">Catalogação dos encadeados</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Durante um ano, Rejewski e sua equipe examinaram cada um dos 105.456 ajustes de rotores e a catalogar o comprimento dos encadeamentos de cada. 
      Ao consultar seu catálogo, conseguia revelar a chave do dia. Mas ainda não sabia os ajustes do painel de conexão, então usava pistas nas mensagens 
      interceptadas, como por exemplo: LEIHLITHER, que na verdade era HEILHITLER, e o painel de conexão ligava H e L trocando-os. Agora ele tinha o 
      ajuste do painel de conexão e dos rotores, ou seja, a chave diária completa. Com as informações recebidas da França, seria possível também descobrir 
      a fiação dos rotores.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">A bomba</h5>
  </div>
  <div class="col-12">
    <p class="text-justify">
      Os alemães realizaram mudanças, que tornou o catálogo de Rejewski inútil e ele inventou um método mecânico de verificar todos os possíveis ajustes dos rotores. 
      Eram 06 máquinas Enigma, cada uma com um dos seis arranjos trabalhando em paralelo. A unidade tinha um metro de altura e era chamada de bomba.
    </p>
    <p class="text-justify">
      Em 1938, os alemães aumentaram 02 rotores, aumentando o número de arranjos possíveis para 60, o número de cabos do painel de conexão aumentou de 
      06 para 10. Rejewski teria que construir 10 vezes mais bombas.
    </p>
    <p class="text-justify">
      Os decifradores poloneses, sem recursos, convidaram criptoanalistas da Grã-Bretanha e da França, que se surpreenderam ao ver que eles decifravam o 
      código há anos. Então Rejewski lhes ofereceu réplicas da Enigma e o projeto para fazer a bomba, isso chegou em Londres duas semanas antes da guerra.
    </p>
  </div>
</div>

<div class="row">
  <div class="col-12">  
      <h5 style="color: #39CCCC">As folhas de Zygalski</h5>
  </div>
  <div class="col-12 col-sm-8">
    <p class="text-justify">
      As repetições percebidas por Rejewski, eram chamadas de fêmeas, significando que uma letra repetida no código da mensagem, fora transposta para a 
      mesma letra do texto cifrado, mesmo com os rotores três passos a frente, o que acontecia com determinados ajustes iniciais. Isso foi catalogado pelos poloneses.
    </p>
    <p class="text-justify">
      Henryk Zygalski, criou 06 conjuntos de 26 folhas, um conjunto para cada ordem dos 03 rotores. Cada folha equivalente a posição do rotor esquerdo. 
      Alfabeto no alto era a posição do rotor no meio e alfabeto que descia a lateral era a posição do rotor da direita. Abria-se um furo nas interseções 
      onde a configuração do rotor produzia uma fêmea.
    </p>
  </div>
  <div class="col-12 col-sm-4 mb-3 text-center">
    <img src="view/static/images/folhas_zygalski.jpg"  alt="As folhas de Zygalski" class="img-fluid img-thumbnail"><br>
    <small>Figura 4: As folhas de Zygalski</small>
  </div>
  <div class="col-12 col-sm-4 mb-3 text-center">
    <img src="view/static/images/maquina_enigma_esquema.jpg"  alt="Máquina Enigma" class="img-fluid img-thumbnail"><br>
    <small>Figura 5: Máquina Enigma</small>
  </div>
  <div class="col-12 col-sm-8">
    <p class="text-justify">
      Se as folhas fossem superpostas e movidas na sequência e na maneira adequada umas às outras, o número de aberturas visíveis reduzia gradativamente 
      e se tivesse quantidade suficiente de dados, restaria uma única abertura correspondendo ao caso correto. Da posição da abertura, era possível 
      calcular a ordem dos rotores, os ajustes de seus anéis, comparar letras das chaves da cifra com as da máquina, bem como permutação S. O código da 
      mensagem era um indicador não cifrado de três letras: Grundstellung. A primeira letra sendo a posição do primeiro rotor, o criptoanalista escolhia 
      as folhas com a letra para cada mensagem que tinha fêmeas no código. A 2ª e a 3ª letra faziam os deslocamentos verticais e horizontais. As folhas 
      eram postas na mesa de luz com deslocamentos apropriados. 
    </p>
    <p class="text-justify">
      Onde os furos caíam uns sobre os outros e a luz passava, o analista conseguia ler o ajuste do anel da chave do dia. Cada folha precisava ter o 
      alfabeto escrito 02 vezes no alto, nas laterais e no rodapé, repetindo os quadros quatro vezes.
    </p>
    <p class="text-justify">
      Com 12 fêmeas no tráfego diário, podia reduzir os ajustes iniciais dos rotores a 01(ajuste falso, produzindo o texto embaralhado) ou 02 (ajuste correto, dando a mensagem original).
    </p>
    <p class="text-justify">
      Em dezembro de 1938, os alemães encomendaram mais 02 rotores, para isso, Zygalski precisaria de 60 conjuntos de folha agora. Em reunião em julho de 1939, 
      os poloneses revelaram aos britânicos o método de folhas perfuradas para decifrar a Enigma, com isso, foi feito conjuntos de Bletchley Park e enviados aos 
      poloneses na França, que descobriam as chaves diárias da máquina.
    </p>
  </div>
</div>

<!-- Puzzle -->
<div class="row">
	<div class="col-12">
		<div class="card">
    <div class="card-body">
				<div class="col-12">
					<h5>Enigma</h5>
				</div>
				
				<div class="col-12 col-md-12">
					<p>
						Você recebu uma mensagem criptografada e precisa decodificá-la.<br>
						Utilize a máquina enigma virtual e configure seguindo as intruções abaixo.<br>
					</p>
					<p>
						<b>Rotores:</b>
						<ul> 
							<li>Setting 4</li>
							<li>Setting 5</li>
							<li>Setting 2</li>
						</ul>
						<b>Plug:</b>
						<ul> 
							<li>Letra F e G</li>              
							<li>Letra Z e B</li>              
						</ul>
					</p>
			
					<h5>Mensagem a ser descriptografada: <span style="color: #39CCCC">IUHFUCICIKX KJ</span></h5><br /> 

					<iframe src="http://fci.inf.br/enigma" width="100%" height="600"></iframe><br /><br /><br />

					<p class="font-weight-bold">Coloque aqui a mensagem descriptografada.</p>
					
					<div class="input-group mb-3" height="500">
						<input type="text" class="form-control" placeholder="Mensagem Descriptografada" aria-label="Mensagem Descriptografada" aria-describedby="button-addon2">
						<div class="input-group-append">
							<button class="btn btn-success" onclick="return checkPasswordChapter(9, this)" type="button" id="button-addon2">Verificar</button>
							<button class="btn btn-info" onclick="return skipOnePuzzle(9, this)" type="button" id="button-addon3" title="Pular desafio"> > </button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>